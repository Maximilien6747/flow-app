<!doctype html>
<meta charset="utf-8">
<title>Reset cache / SW</title>
<script>
(async () => {
  try {
    if ('serviceWorker' in navigator) {
      const regs = await navigator.serviceWorker.getRegistrations();
      for (const r of regs) { try { await r.unregister(); } catch(e){} }
    }
    if (window.caches) {
      const names = await caches.keys();
      await Promise.all(names.map(n => caches.delete(n)));
    }
  } catch(e) {}
  // retour vers l'app après nettoyage
  location.replace("./?nocache=" + Date.now());
})();
</script>
<body style="font:16px system-ui;padding:20px">
  Nettoyage en cours… Si rien ne se passe, <a href="./?nocache=1">clique ici</a>.
</body>
